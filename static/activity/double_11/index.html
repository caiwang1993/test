<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>双十一活动</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="blank">
    <meta name="format-detection" content="telephone=no">
    <meta name="x5-orientation" content="portrait">
    <meta name="x5-fullscreen" content="true">
    <meta name="full-screen" content="yes">
    <meta http-equiv="Cache-Control" content="no-cache">
    <link href="style/css/reset.css" rel="stylesheet">
    <link href="style/css/index.css" rel="stylesheet">
    <script src="./style/js/jquery-1.11.1.min.js"></script>
    <script src="./style/js/common.js"></script>
    <style>
    </style>
</head>
<body>
    <!--效果html开始-->
   <div class="activity-container">
       <div class="activity-title-box">
           <p class="act-time">活动时间：2019年11月09日-11月13日</p>
       </div>
      <p class="lottery-times">
           您拥有<span style="margin: 0 0.2rem;color: #FECE38">3</span>局翻牌机会
       </p>
        <div class="lottery-box">
           <ul class="lottery-list">
               <li class="lottery-item-1">
                   <div class="reward-box"></div>
               </li>
               <li class="lottery-item-2">
                   <div class="reward-box"></div>
               </li>
               <li class="lottery-item-3">
                   <div class="reward-box"></div>
               </li>
               <li class="lottery-item-4">
                   <div class="reward-box"></div>
               </li>
               <li class="lottery-item-5">
                   <div class="reward-box"></div>
               </li>
               <li class="lottery-item-6">
                   <div class="reward-box"></div>
               </li>
               <li class="lottery-item-7">
                   <div class="reward-box"></div>
               </li>
               <li class="lottery-item-8">
                   <div class="reward-box"></div>
               </li>
               <li class="lottery-item-9">
                   <div class="reward-box"></div>
               </li>
           </ul>
       </div>
      <div class="act-rules-box">
           <div class="act-rules">
               <p class="rule-title">活动规则：</p>
               <p>1、本活动仅限官方玩家参与；</p>
               <p>2、活动奖品100%必得，且不会重复获得；</p>
               <p>3、仅限游戏内微信和支付宝的实付金额，平台币和优惠券抵扣部分除外（例：小明充值50元使用了15元优惠券或者15元平台币，则以实际支付金额35元为准。）；</p>
               <p>4、奖品丰厚：第 <span style="color: #FF9709;font-weight: bold">7、8、9</span>次翻牌必中 <span  style="color: #FF9709;font-weight: bold">50、100、200元平台币。</span></p>
           </div>
           <img src="style/images/rule@2x.png" class="rule-img">
       </div>

       <p class="act2-title"><span style="color: #FECE38">平台币</span>充值首次<span style="color: #FECE38">优惠</span>，限时<span style="color: #FECE38">秒杀</span>，不容错过！</p>
       <div class="limit-time-act">
           <a href="javascript:;" class="buy-btn js-buy-btn">
               ￥<span style="font-size: 0.46rem;">95</span> 立即购买
           </a>
           <div class="activity-time"></div>
       </div>
       <div class="act-rules-box">
           <div class="act-rules">
               <p class="rule-title">活动规则：</p>
               <p>1、本活动仅限官方玩家参与；</p>
               <p>2、仅限本活动页面付款，其他地方付款无效；</p>
               <p>3、2019.11.9-11.13期间每天<span style="color: #FECE38">11:11</span>开启秒杀，每次持续10分钟，限量10份，秒完为止。</p>
               <p class="tips">* 本次活动最终解释权归一牛游戏所有</p>
           </div>

       </div>
   </div>
    <script src="./style/js/jquery-1.11.1.min.js"></script>
    <script src="./style/js/layer/layer.js"></script>
    <script>
        $(function () {
            $user = "{:is_login()}";
            $('.js-to-invite').click(function(){
              if(!parseInt($user)>0){
                  layer.msg("请先登录");
                  return false;
              }
            });
            //
            var lottery={
                lottery_ok:[1,2,3,4,9],      //已翻的卡牌位置
                lottery_num:0,       //已抽奖次数
                lottery_id:[3,2,1,5,7],      //已中奖id集合
                lottery_cur:0,        //本次中奖id
                reward_content:''     //奖品内容
            };
            //卡牌翻转效果
            $('.lottery-box li').click(function () {
                var that =$(this);
                if(that.hasClass("active") || that.hasClass("on")){return false}
                that.addClass("on");
                setTimeout(function () {
                    that.find(".reward-box").fadeIn(1500)
                },1500);
                lottery.lottery_cur=9;                 //点击翻牌后后台传值本次中奖id
                lottery_content(lottery.lottery_cur);  //根据中奖id，获取翻牌后的中奖内容
                that.find(".reward-box").empty().append(lottery.reward_content)
            });
            //进入页面显示已翻牌的样式
            for(var i in lottery.lottery_ok){
                $('.lottery-item-'+lottery.lottery_ok[i]).addClass("active").find(".reward-box").show();
                lottery_content(lottery.lottery_id[i]);
                $('.lottery-item-'+lottery.lottery_ok[i]).find(".reward-box").append(lottery.reward_content)
            }
            // 奖品内容
            function lottery_content(reward_id) {
                lottery.reward_content='';
                switch (reward_id){
                    case 1 :
                        lottery.reward_content+='<img src="style/images/ey.png" class="reward-img"> <p class="reward-name" style="margin-top: 0.4rem">满6减2</p>';
                        break;
                    case 2 :
                        lottery.reward_content='<img src="style/images/fy.png" class="reward-img"> <p class="reward-name" style="margin-top: 0.4rem">满30减5</p>';
                        break;
                    case 3 :
                        lottery.reward_content='<img src="style/images/ptb.png" class="reward-img"> <p class="reward-name"><span style="font-weight: bold;font-size: 0.56rem">5</span>元<br/>平台币</p>';
                        break;
                    case 4 :
                        lottery.reward_content='<img src="style/images/ptb.png" class="reward-img"> <p class="reward-name"><span style="font-weight: bold;font-size: 0.56rem">10</span>元<br/> 平台币</p>';
                        break;
                    case 5 :
                        lottery.reward_content='<img src="style/images/ty.png" class="reward-img"> <p class="reward-name" style="margin-top: 0.4rem">满98减20</p>';
                        break;
                    case 6 :
                        lottery.reward_content='<img src="style/images/ptb.png" class="reward-img"> <p class="reward-name"><span style="font-weight: bold;font-size: 0.56rem">20</span>元<br/> 平台币</p>';
                        break;
                    case 7 :
                        lottery.reward_content= '<img src="style/images/ptb.png" class="reward-img"> <p class="reward-name"><span style="font-weight: bold;font-size:  0.56rem">50</span>元<br/> 平台币</p>';
                        break;
                    case 8 :
                        lottery.reward_content='<img src="style/images/ptb.png" class="reward-img"> <p class="reward-name"><span style="font-weight: bold;font-size: 0.56rem">100</span>元 <br/>平台币</p>';
                        break;
                    case 9 :
                        lottery.reward_content='<img src="style/images/ptb.png" class="reward-img"> <p class="reward-name"><span style="font-weight: bold;font-size:  0.56rem">200</span>元<br/> 平台币</p>';
                        break;
                }
            }

            // 秒杀活动倒计时
            var s = 1000,
                m = 60 * s,
                h = 60 * m,
                d = 24 * h,
                tick_time = 1000,
                timezone = new Date().getTimezoneOffset() * m;

            var getDayTime = function(t) {
                t = t.split(':');
                return t[0] * h + t[1] * m;
            };

            var getNextClock = function(clockTime, resetTime, now) {
                var result = now_d = parseInt(now / d, 10) * d + timezone;
                now_d_t = now - now_d;
                if (now_d_t > resetTime) {
                    result += d;
                }
                return result + clockTime;
            };

            var before = 0,
                resetTime = getDayTime('00:00'),
                clock24 = getDayTime('11:11'),
                clock24_2 = getDayTime('11:21');

            var tickHandler = {
                begin_time:function () {
                    var now = Date.now();
                    if (now - before > tick_time) {
                        var nextClock = getNextClock(clock24, resetTime, now);
                        var diff = nextClock - now;
                        var floor = Math.floor;
                        var diif_readable = [
                            floor(diff / d),
                            floor((diff % d) / h),
                            floor((diff % h) / m),
                            floor((diff % m) / s)
                        ];
                        var hour= diif_readable[1]<10?"0"+diif_readable[1]:diif_readable[1];
                        var minutes= diif_readable[2]<10?"0"+diif_readable[2]:diif_readable[2];
                        var second= diif_readable[3]<10?"0"+diif_readable[3]:diif_readable[3];
                        var act_time=hour+':'+minutes+':'+second;
                        $('.js-buy-btn').addClass("disabled");
                        var result='距离 <span class="time">'+act_time+'</span> 开始';
                        $('.activity-time').empty().append(result);
                        before = now;
                    }
                },
                end_time:function () {
                    var now = Date.now();
                    if (now - before > tick_time) {
                        var nextClock = getNextClock(clock24_2, resetTime, now);
                        var diff = nextClock - now;
                        var floor = Math.floor;
                        var diif_readable = [
                            floor(diff / d),
                            floor((diff % d) / h),
                            floor((diff % h) / m),
                            floor((diff % m) / s)
                        ];
                        var hour= diif_readable[1]<10?"0"+diif_readable[1]:diif_readable[1];
                        var minutes= diif_readable[2]<10?"0"+diif_readable[2]:diif_readable[2];
                        var second= diif_readable[3]<10?"0"+diif_readable[3]:diif_readable[3];
                        var act_time=hour+':'+minutes+':'+second;
                        $('.js-buy-btn').removeClass("disabled");
                        var result='剩余 <span class="time">'+act_time+'</span> 结束';
                        $('.activity-time').empty().append(result);
                        before = now;
                    }
                }
            };
            var handler = setInterval(function () {
                var now = new Date();
                var cur_hour=now.getHours();
                var cur_min=now.getMinutes();
                if(cur_hour===11 && 11<=cur_min&&cur_min<21){
                    tickHandler.end_time()
                }else {
                    tickHandler.begin_time()
                }
            },tick_time/20);
            //点击购买按钮
            $('.js-buy-btn').click(function () {
                if($(this).hasClass("disabled")){
                    layer.msg("活动还没有开始哦~");
                    return false
                }
                layer.msg("抢购成功")
            })
        })
    </script>
<script>
    let a = [];
    for (let i = 0; i < 10; i++) {
        a[i] = function () {
            console.log(i);
        };
    }
    a[6]();
</script>
</body>
</html>